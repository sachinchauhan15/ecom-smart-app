<%- include("header", { pageTitle: "Edit Product" }) %>

  <h1 class="mb-4">Edit Product</h1>

  <% if (typeof errors !=="undefined" && errors.length> 0) { %>
    <div class="alert alert-danger">
      <ul>
        <% errors.forEach(e=> { %>
          <li>
            <%= e %>
          </li>
          <% }) %>
      </ul>
    </div>
    <% } %>
      <form action="/admin/products/edit/<%= product.id %>" method="POST">
        <div class="mb-3">
          <label class="form-label">Product Name</label>
          <input type="text" name="name" value="<%= product.name %>" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Product Description</label>
          <input type="text" name="description" value="<%= product.description %>" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Price</label>
          <input type="number" name="price" value="<%= product.price %>" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Stock</label>
          <input type="number" name="stock" value="<%= product.stock %>" class="form-control" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Product Image</label><br>
          <% if (product.image) { %>
            <img src="<%= product.image %>" width="100" class="mb-2"><br>
            <% } %>
              <input type="file" name="image" class="form-control" accept="image/*">
              <input type="hidden" name="oldImage" value="<%= product.image %>">
        </div>
        <button type="submit" class="btn btn-primary">Update</button>
        <a href="/admin/products/" class="btn btn-secondary">Cancel</a>
      </form>

      <%- include("footer") %>